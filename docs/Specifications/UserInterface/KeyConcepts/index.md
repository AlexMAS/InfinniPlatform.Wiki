---
layout: doc
title: "Key Concepts"
position: 0
---

Ключевым понятием при описании интерфейса пользователя является визуальное представление - [View](../View/).
Представление имеет достаточно много аспектов, каждый из которых более подробно будет описан ниже.
Пока следует сказать, что каждый из этих аспектов отвечает за достаточно узкий круг задач и никак не
зависит от других аспектов. Все необходимые связи между аспектами устанавливаются инфраструктурой
системы в момент выполнения (если быть точным, то в момент интерпретации метаданных представления).
Подобная независимость и модульность позволяет достаточно свободно расширять модель представления и
достаточно просто вносить изменения в каждый из ее аспектов.

Также следует отметить, что представление и все, что с ним связано, не завязано на какую-то конкретную
предметную область. Напротив, для обеспечения большей гибкости и расширения границ применения, все
аспекты представления, с одной стороны, никак не связаны с конкретной предметной областью,
с другой – образуют достаточно полный функциональный базис, используя который можно решить подавляющую
часть задач, возникающих на уровне интерфейса пользователя. Естественно, что за подобную универсальность
приходится платить и в данном случае это отражается на несколько низкоуровневом характере аспектов
представления, но не настолько низкоуровневом, чтобы эти аспекты не были бы понятны прикладному
разработчику. Более того, предполагается, что многие задачи будут решаться с использованием
автогенерированных представлений, а с учетом наличия механизма, который позволяет прикладным
разработчикам разрабатывать генераторы представлений, подобная расплата за гибкость не кажется
такой высокой.

Основные аспекты представления приведены в списке ниже и на иллюстрации.

* [Context](#context)  
* [Script](#script)
* [Parameter](#parameter)
* [Data Source](#data-source)
* [Message Bus](#message-bus)
* [Layout Panel](#layout-panel)

![](ViewAspects.png)

# Context

[Контекст представления](ViewContext/) - программный объект, который хранит состояние
представления и предоставляет строго определенный API для доступа к элементам представления. Вызов
любого прикладного скрипта или обработчика события сопровождается передачей ему контекста представления,
благодаря чему контекст является одним из ключевых аспектов, когда речь заходит о написании прикладных
скриптов.

Контекст создается для каждого экземпляра представления и время его жизни определяется временем жизни
соответствующего экземпляра представления. Иными словами, каждое представление имеет свой контекст,
который связан только с данным представлением. Мотивы в подобной изоляции всё те же - обеспечение
стабильности работы приложения. Также следует отметить, что контекст является динамическим объектом
и не исключено, что с течением времени, вследствие выполнения прикладных скриптов, контекст может
динамически расширяться дополнительными свойствами и методами.

# Script

[Прикладной скрипт](Script/) - функция, выполняемая на стороне клиента. Чаще всего прикладные скрипты
используются в качестве обработчиков событий элементов представления, но могут выступать и в качестве
повторно используемых функций, вызываемых из любого другого скрипта. Прикладные скрипты задают императивную
логику обработки некоторого события, используя API, предоставленный контекстом и элементами представления.
На данный момент для написания прикладных скриптов используется язык программирования JavaScript.

Для обеспечения стабильности работы основной акцент делается на то, чтобы у приложения не было никакого
глобального контекста (состояния), который мог бы повлиять на корректность работы приложения. Именно
по этой причине все прикладные скрипты регистрируются в рамках представления, а область их видимости
ограничена представлением и его элементами. Иными словами, у представления, конечно, есть контекст,
но область видимости этого контекста ограничивается представлением, соответственно, у прикладного
скрипта в общем случае отсутствует какая-либо возможность повлиять на что-то, что выходит за рамки
представления, к которому относится этот скрипт.

# Parameter

[Параметр](../Parameter/) - программный объект, используемый для обмена данными между
представлениями. Передача данных между представлениями может быть как однонаправленной, так и
двунаправленной. Под однонаправленной передачей понимается передача данных из родительского
представления в дочернее (открываемое), либо наоборот. Под двунаправленной передачей понимается
взаимный обмен данными между представлениями.

# Data Source

Каждое [визуальное представление](View/), как правило, связано с какими-либо данными.
В целях унификации и упрощения работы с данными используется единый программный. Также выделено
несколько типов источников данных, покрывающих подавляющее количество задач с данными на уровне системы.
Источники данных создаются на этапе интерпретации метаданных представления, регистрируются в рамках
экземпляра соответствующего представления и доступны через контекст представления.

# Message Bus

Представление может иметь достаточно большое количество визуальных и не визуальных элементов,
функционально связанных между собой. Более того, со временем количество элементов представления может
измениться, количество функциональных связей может измениться, могут появиться новые типы элементов
или измениться характер функциональных связей. Если при таких исходных данных функциональную связь
между элементами делать императивно, то достаточно быстро произойдет комбинаторный взрыв, и развивать
функциональность будет невозможно. Однако, несмотря на непредсказуемость и сложность функциональных
связей, типы связей достаточно предсказуемы и вполне определены. Все это дает предпосылки использования
шины сообщений для организации взаимодействия между элементами представления.

Таким образом, на уровне инфраструктуры все функциональные связи между элементами представления
осуществляются через [шину сообщений](MessageBus/). Правила публикации сообщений в шину и правила
подписки на сообщения шины задаются в момент выполнения интерпретации данных представления, абсолютно
прозрачно для прикладного разработчика. (Тем не менее, прикладной разработчик может свободно использовать
функциональность шины сообщений для реализации своих задач.) В итоге, подобный подход позволил решить
многие вышеуказанные проблемы, сохранив самодостаточность и независимость элементов представления.

# Layout Panel

Контейнер элементов представления - визуальный элемент представления, который определяет способ
визуального расположения своих дочерних элементов. На данный момент выделено несколько основных схем
расположения: сетка ([GridPanel](../Layouts/GridPanel/)), стек ([StackPanel](../Layouts/StackPanel/)),
панель закладов ([TabPanel](../Layouts/TabPanel/)), область прокрутки ([ScrollPanel](../Layouts/ScrollPanel/)).

Для представления можно определить только один корневой контейнер элементов, но сам контейнер может
содержать сколько угодно других контейнеров и элементов в любой их комбинации. Используя различные
типы контейнеров, можно построить интерфейс практически любой сложности.
