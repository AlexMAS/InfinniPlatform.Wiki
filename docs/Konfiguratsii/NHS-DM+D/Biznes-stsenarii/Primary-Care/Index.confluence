---
layout: default
title: "Primary Care"
position: 
categories: 
tags: 
---

<h1>Создание лекарственного назначения</h1><p>&nbsp;</p><p><ac:image><ri:attachment ri:filename="scenario.png" /></ac:image></p><ac:structured-macro ac:name="note"><ac:parameter ac:name="title">Внимание!</ac:parameter><ac:rich-text-body><p>Получить подробную документацию о всех доступных сервисах конфигурации можно по адресу:</p><p><u>http://&lt;servername&gt;:&lt;port&gt;/systemconfig/standardapi/metadata/helpconfiguration/?query={"id":"dmd"}</u></p></ac:rich-text-body></ac:structured-macro><table><tbody><tr><th>№</th><th>Сценарий</th><th colspan="1">Рекомендации</th></tr><tr><td>1</td><td>Display Product Pick List</td><td colspan="1"><h4>Отображение списка продуктов для выбора</h4><p>В начале сценария пользователю для выбора показывается список результатов поиска по <ac:link><ri:page ri:content-title="ActualProduct" /><ac:plain-text-link-body><![CDATA[AMP]]></ac:plain-text-link-body></ac:link> (Actual Medicinal Products) и <ac:link><ri:page ri:content-title="VirtualProduct" /><ac:plain-text-link-body><![CDATA[VMP]]></ac:plain-text-link-body></ac:link> (Virtual Medicinal Products).</p><p>Пользователю необходимо предоставить возможность поиска продукта по 4 возможным критериям:</p><ol><li>Generic Drug Name (<ac:link><ri:page ri:content-title="VirtualProduct" /></ac:link>.<span class="uiJsonPretty-name">VirtualTherapeuticMoietyId.DisplayName)</span></li><li><span class="uiJsonPretty-name">Brand Name (<ac:link><ri:page ri:content-title="ActualProduct" /></ac:link>.<span style="color: rgb(0,51,102);">SupplierId.DisplayName</span>)</span></li><li>Generic Product Name (<ac:link><ri:page ri:content-title="VirtualProduct" /></ac:link>.Name)</li><li>Actual Product Name (<ac:link><ri:page ri:content-title="ActualProduct" /></ac:link>.Name)</li></ol><p>Согласно рекомендациям, необходимо обеспечивать поиск как AMP так и по VMP. Соответственно, имеет смысл сделать переключатель AMP/VMP на форме продуктов для выбора.</p><p>По умолчанию в загруженной форме списка элементов для выбора необходимо загружать первую страницу данных AMP/VMP, в зависимости от положения переключателя.</p><p>В зависимости от этого выполнять один из нижеследующих запросов:</p><p>см. документацию, запрос:</p><p>&quot;Получение постраничного списка данных справочника ActualProduct&quot;</p><p><span>&quot;Получение постраничного списка данных справочника VirtualProduct&quot;</span></p><p>Согласно рекомендациям, на форме журнала продуктов для выполнения подбора данных должны присутствовать фильтры. Поскольку в данный момент мы не сможем отрендерить другие фильтры, используем только полнотекстовый фильтр, пример см. в документации, запросы:</p><p>&quot;Получение данных справочника ActualProduct по части наименования (FullTextSearch запрос)&quot;</p><p><span>&quot;Получение данных справочника VirtualProduct по части наименования (FullTextSearch запрос)&quot;</span></p><p>В зависимости от положения переключателя выполняем следующие запросы:</p><h5>Переключатель в положении AMP</h5><table><tbody><tr><th>№ критерия</th><th>Реализация</th></tr><tr><td><span>Generic Drug Name</span></td><td><p>Поиск не может быть выполнен</p></td></tr><tr><td><span>Brand Name</span></td><td>Поиск выполняется по полю SupplierId.DisplayName</td></tr><tr><td><span>Generic Product Name</span></td><td>Поиск выполняется по полю VirtualProductId.DisplayName&nbsp;</td></tr><tr><td colspan="1"><span>Actual Product Name</span></td><td colspan="1">Поиск выполняется по полю Name</td></tr></tbody></table><h5>Переключатель в положении VMP</h5><table><tbody><tr><th>№ критерия</th><th>&nbsp;</th></tr><tr><td><span>Generic Drug Name</span></td><td><span><span>Поиск выполняется по полю </span>VirtualProduct.VirtualTherapeuticMoietyId.DisplayName</span></td></tr><tr><td><span>Brand Name</span></td><td><span>Поиск не может быть выполнен&nbsp;</span></td></tr><tr><td><span>Generic Product Name</span></td><td><span>Поиск выполняется по полю Name</span></td></tr><tr><td colspan="1"><span>Actual Product Name</span></td><td colspan="1"><span>Поиск выполняется по полю ActualProducts.$.DisplayName&nbsp;, где $ номер каждого элемента коллекции ActualProducts</span></td></tr></tbody></table><p>Ввод данных при этом выполняется в одно поле, но, в зависимости от введенных данных поиска, поиск вернет записи, отфильтрованные полнотекстовым поиском по тому или иному полю</p><p>&nbsp;</p></td></tr><tr><td colspan="1">2</td><td colspan="1">Generic/Brand Switching</td><td colspan="1"><h4>Переключение между AMP / VMP</h4><p>Если на предыдущем шаге пользователь выбрал VMP, он может переключиться на AMP. В этом случае ему необходимо предоставить возможность выбрать AMP из списка препаратов, соответствующих ранее выбранному VMP</p><p>Для этого следует выполнить запрос (см.документацию):</p><p>&quot;Получение данных справочника ActualProduct по соответствующему идентификатору VirtualProduct&quot;</p><p>Также можно переключиться c AMP на VMP. Для этого следует выполнить запрос (см.документацию)</p><p>&quot;Получение данных справочника VirtualProduct по соответствующему идентификатору ActualProduct&quot;</p><p>В общем случае, существуют дополнительные обстоятельства, ограничивающие возможность замены VMP на AMP и обратно, однако текущая реализация не позволяет пока их учитывать. Поэтому позволяем пользователю осуществлять переключение в любой момент</p></td></tr><tr><td colspan="1">3</td><td colspan="1">Add Dose</td><td colspan="1"><h4>Добавление лекарственного назначения</h4><p>На данном шаге создаем лекарственное назначение для ранее выбранного AMP/VMP. Эта сущность представляет собой отдельный документ (<ac:link><ri:page ri:content-title="MedicationAdministration" /><ac:plain-text-link-body><![CDATA[Medication Administration]]></ac:plain-text-link-body></ac:link>), хранящий ссылку на пациента, которому назначен препарат.</p></td></tr><tr><td colspan="1">4</td><td colspan="1">Add Supply Quantity and Unit of Measure</td><td colspan="1"><p>Добавление количества и указание единицы измерения</p><p>На данном шаге пользователь может выбрать VMPP (Virtual Medicinal Product Pack), соответствующий VMP для выбранного AMP, но только такой VMPP, для которого существует хотя бы один AMPP (Actual Medicine Product Pack)</p><p>Доступные VMPP для выбранного VMP можно получить с использованием запроса:</p><h4>пока не добавлено, просто позволяем выбрать любую VMPP из списка Virtual Packs у VirtualProduct</h4></td></tr><tr><td colspan="1">5</td><td colspan="1">Add Prescriber Endorsements</td><td colspan="1"><h4>Подтверждение выписки</h4><p>В Великобритании, как и в России, существуют препараты, при выписке которых врач должен подтвердить, что он в курсе, что эти препараты входят в особые списки. В описании упаковки (AMPP) присутствует информация <span style="color: rgb(0,51,102);">о назначении упаковки существующего лекарственного средства </span>(<ac:link><ri:page ri:content-title="ActualProductPack" /></ac:link>.<span style="color: rgb(0,51,102);"><ac:link><ri:page ri:content-title="ActualProductPackPrescribing" /><ac:plain-text-link-body><![CDATA[Prescribing]]></ac:plain-text-link-body></ac:link></span>), ее и нужно отобразить пользователю на шаге подтверждения.</p></td></tr><tr><td colspan="1">6</td><td colspan="1">Identify Additional Product Information</td><td colspan="1"><h4>Предоставление дополнительной информации по продукту</h4><p>Находится внутри выбранного VMP</p><p>К дополнительной информации относится:</p><ul><li><span class="uiJsonPretty-name">ControlCategory (контроль за оборотом наркотикосодержащих средств и т.п)</span></li><li><span class="uiJsonPretty-name">FP10 MDA Form (признак того, что для данного лекарства должна быть заполнена форма FP10 MDA)</span></li><li class="expando">IsPersonallyAdministered (признак персональной ответственности за препарат)</li></ul></td></tr><tr><td colspan="1">7</td><td colspan="1">Additional Product</td><td colspan="1"><h4>Добавить еще один продукт к назначению</h4><p>Открыть заново форму подбора AMP/VMP</p></td></tr><tr><td colspan="1">8</td><td colspan="1">Generate Prescription and Record Prescribed Item</td><td colspan="1"><h4>Сгенерировать назначение и сохранить</h4><p>Запросы:</p><p>&quot;Сохранение документа назначения в хранилище&quot;,</p><p>&quot;Чтение документа назначения из хранилища&quot;</p><p>&quot;Удаление документа назначения из хранилища&quot;</p></td></tr></tbody></table>