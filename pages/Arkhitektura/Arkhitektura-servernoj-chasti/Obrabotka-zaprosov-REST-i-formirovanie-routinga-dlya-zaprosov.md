---
layout: default
title: Обработка запросов REST и формирование роутинга для запросов
position: 
categories: 
tags: 
---

Дополнительная информация о конфигурации см. здесь.

Роутинг запросов платформы строится на базе следующего шаблона формирования url:

 

http://<server>:<port>/<ConfigurationId>/StandardApi/<MetadataName>/<ActionName>/

**Параметры шаблона:**

server - адрес сервера, где развернута конфигурация, к которой идет обращение, например, 10.10.1.82

port - порт сервера, где развернута конфигурация, например 9999

ConfigurationId - идентификатор конфигурации, к которой идет обращение, например "Integration"

MetadataName - идентификатор объекта метаданных, к которому идет обращение, например "Patient"

ActionName - идентификатор обработчика (действия), зарегистрированного в данной конфигурации для указанного объекта метаданных

**Примеры обращения:**

```
http://localhost:9900/Integration/StandardApi/Organization/Search/?query={"FilterObject":[{"Property":"PublicId","Value":"9D84BCDD-3F3B-490A-A74C-F8C46DD4BBD1"}],"PageNumber":0,"PageSize":1}
```

Пример 1 представляет собой GET запрос, к прикладной конфигурации Integration, действие Search. Для этого действия в конфигурации зарегистрирован [[обработчик|Декларативное описание сервисов платформы]] SearchHandler, которому в качестве параметров передан Json объект, содержащий передаваемые в обработчик  обязательные параметры.

```
http://localhost:9999/ClassifierStorage/StandardApi/classifiervalue/Publish 

BODY:
{
   "id":null,
   "events":[
      {
         "Property":"CodeSystem",
         "Value":"Test",
         "Action":2,
         "Index":-1
      },
      {
         "Property":"CodeSystemVersion",
         "Value":"1.0",
         "Action":2,
         "Index":-1
      },
      {
         "Property":"ClassifierValues",
         "Value":null,
         "Action":8,
         "Index":-1
      },
      {
         "Property":"ClassifierValues",
         "Value":null,
         "Action":16,
         "Index":-1
      },
      {
         "Property":"ClassifierValues.0.CODE",
         "Value":"D",
         "Action":2,
         "Index":-1
      },
      {
         "Property":"ClassifierValues.0.NAME",
         "Value":"Для врача",
         "Action":2,
         "Index":-1
      }
   ]
}
```

Пример 2 представляет собой POST запрос к прикладной конфигурации ClassifierStorage, объекту метаданных classifiervalue, обработчику (действию) Publish. Для действия Publish в прикладной конфигурации зарегистрирован [[обработчик ApplyChangesHandler|Обработчик запросов изменения данных (ApplyChangesHandler)]], в который передаются в качестве аргументов параметры id и events, указанные в теле запроса.

Таким образом, следует помнить, что ***роутинг запросов полностью задается тремя параметрами: идентификатор прикладной конфигурации, идентификатор объекта метаданных, идентификатор зарегистрированного действия для объекта метаданных.***

Описание структуры метаданных конфигурации находится [[здесь|Метаданные конфигурации]].

Вопросы декларирования сервисов метаданных обсуждаются [[здесь|Декларативное описание сервисов платформы]].

Также следует ознакомиться с [[принципами формирования описания прикладной конфигурации в виде JSON-файла|Декларативное описание структуры прикладной конфигурации]].

