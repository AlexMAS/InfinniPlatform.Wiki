---
layout: default
title: Точки расширения бизнес-логики
position: 
categories: 
tags: 
---

Точки расширения бизнес-логики используются для вызова custom end-user business logic в точках расширения логики зарегистрированных типов сервисов. Зарегистрированные типы сервисов и список их точек расширения см. [[здесь|Декларативное описание сервисов платформы]]

Каждый тип обработчика имеет свой список точек расширения бизнес-логики, каждая из которых будет вызываться в нужный момент.

Для каждой точки расширения может быть указан или не указан свой ***скриптовый обработчик***. Если скриптовый обработчик для точки расширения указан - он будет вызван, если не указан, точка расширения будет проигнорирована.

В текущей реализации возможна установка пользовательских скриптовых расширений только на языке C#.

При вызове скриптового обработчика он получает в параметрах так называемый ***контекст исполнения***. Существует несколько основных типов контекста исполнения. Все они описываются в сборке InfinniPlatform.API

|Тип|Предназначение|
|---|--------------|
|FilterEventContext|Контекст обработчика фильтрации событий|
|ApplyContext|Контекст обработчика перехода изменяемого объекта из состояния в состояние|
|ApplyResultContext|Контекст подготовки результата обработки изменяемого объекта|
|SearchContext|Контекст поиска объекта по указанным параметрам|
|UploadContext|Контекст загрузки файлового контента|

Каждый из указанных выше типов контекста имеет свой набор предустановленных свойств и методов, которые необходимы будут прикладному разработчику для написания кода данного скриптового обработчика точки расширения.

```
    public sealed class ActionUnitSaveOrganization 
    {
        public void Action(IApplyContext target)
        {
            target.Item.Token = Guid.NewGuid().ToString();
            if (target.Item.GetProperty("Status") == null)
            {
                target.Item.PublicId = Guid.NewGuid().ToString();
            }
        }
    }
```

