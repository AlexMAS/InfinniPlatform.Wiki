---
layout: default
title: Получение результата агрегации по регистру в период между двумя датами (GetValuesBetweenDates)
position: 
categories: 
tags: 
---

Перед рассмотрением операций, следует ознакомиться с [[правилами формирования запросов REST|Обработка запросов REST и формирование роутинга для запросов]]

#### Внутренняя реализация

Запрос применим к регистру оборотов и позволяет получить информацию об изменении значений ресурсов за указанный период. Запрос позволяет указать измерения, по которым производить агрегацию. Если список измерений не задан, в качестве измерений будут взяты все свойства регистра, помеченные как Dimension. 

#### Запрос

POST [http://<ServerName>:<PortName>/SystemConfig/StandardApi/metadata/GetRegisterValuesBetweenDates ](http://10.10.1.82:9999/SystemConfig/StandardApi/metadata/GetRegisterValuesBetweenDates)

```
{
	"id": null,
	"changesObject": {
		"Configuration": "<Configuration name>",
		"Register": "<Register name>",
		"FromDate": "<From date>",
		"ToDate": "<To date>",
		"Dimensions": <Dimensions>,
		"ValueProperty": <Value property>
	},
	"replace": false
}
```

В теле запроса передаются следующие аргументы

<Configuration name> - идентификатор конфигурации (см. [[правила формирования запросов REST|Обработка запросов REST и формирование роутинга для запросов]])

<Register name> - наименование регистра (см. [[правила формирования запросов REST|Обработка запросов REST и формирование роутинга для запросов]])

<From date> - дата, от которой необходимо рассчитать значения ресурсов. Например, "2014-08-12T00:00:00"

<To date> - дата, до которой необходимо рассчитать значения ресурсов. Например, "2015-08-12T00:00:00"

<Dimensions> - измерения, по которым выполнять агрегацию. Например, ["Room", "Bed"]

<Value property> - Свойство, по которому будет вычислено агрегирующее значение. Например, "Value"

#### Ответ

Ответ сервера (пример):

```
[{
	"Room": "палата 33",
	"Bed": "койка 1",
	"Value": 1.0
},
{
	"Room": "палата 33",
	"Bed": "койка 2",
	"Value": 2.0
}
]
```

Количество объектов в массиве соответствует количеству различных комбинаций значений в полях измерений. Например, в приведенном примере измерениями являются поля Room и Bed. За указанный период было зарегистрировано два изменения в палате 33 (на 2 разных койках), следовательно имеем два объекта в результирующем массиве данных. Поле Value в данном случае является вычисленным рес

