---
layout: default
title: Получение 'сырых' данных из регистра (GetRegisterEntries)
position: 
categories: 
tags: 
---

Перед рассмотрением операций, следует ознакомиться с [[правилами формирования запросов REST|Обработка запросов REST и формирование роутинга для запросов]]

#### Внутренняя реализация

Регистры содержат информацию, создающуюся при проведении документов. Если рассматривать на уровне реализации, то регистр представляет собой хранилище документов. Каждая запись в регистре имеет ряд служебных свойств: Registrar (идентификатор документа-регистратора), RegistrarType (тип документа-регистратора), EntryType (тип записи, может принимать значения из набора: Income, Consumtion, Other), DocumentDate (дата создания документа-регистратора). В базовом сценарии обращение к регистрам будет производиться через специализированные запросы на агрегацию данных, где автоматически будут использованы значения служебных свойств и, как правило, пользователю не нужно знать о существовании служебных свойств. Однако, могут возникнуть ситуации, когда пользователю будут нужны необработанные данные из регистров. Специально для этих в API имеется метод GetRegisterEntries, позволяющий получить значения из регистра по его имени. Фактически, в рамках данного метода выполняется  [[Операция получения списка документов по фильтру (GetDocument)|Операция получения списка документов по фильтру (GetDocument)]], где в качестве метаданных указывается "Register_<Register name>", где Register name - наименование регистра, из которого необходимо получить необработанные значения.

####  

#### Запрос

POST [http://<ServerName>:<PortName>/RestfulApi/StandardApi/configuration/getdocument](http://10.10.1.82:9999/RestfulApi/StandardApi/configuration/getdocument)

```
{
	"id": null,
	"changesObject": {
		"Configuration": "<Configuration name>",
		"Metadata": "Register_<Register name>",
		"Filter": <Filter object>,
		"PageNumber": <Page number>,
		"PageSize": <Page size>,
		"ResolveReferences": false
	},
	"replace": false
}
```

В теле запроса передаются следующие аргументы (вместо <parameter name> указывается нужное значение)

<Configuration name> - идентификатор конфигурации (см. [[правила формирования запросов REST|Обработка запросов REST и формирование роутинга для запросов]])

<Metadata name> - наименование объекта метаданных (см. [[правила формирования запросов REST|Обработка запросов REST и формирование роутинга для запросов]])

<Filter object> -объект фильтра для поискового запроса (см. структура фильтра поискового запроса), может содержать null либо значение фильтра

<Page number> -номер страницы результатов поискового запроса, по умолчанию 0

<Page size> -размер страницы поискового запроса, по умолчанию 10

#### Ответ

Ответ сервера (пример):

```
[{
	"Registrar": "e39c7d32-4f85-45d9-a80e-cabbba6c42ba",
	"RegistrarType": "bedsregistration",
	"EntryType": "Income",
	"Id": "497f8b3c-3511-4ed7-9189-0a6b79137dae",
	"DocumentDate": "2114-03-01T00:00:00",
	"Room": "Палата 1",
	"Bed": "Койка 6",
	"Value": 1,
	"TimeStamp": "2014-08-29T13:48:02.8238145+06:00"
},
{
	"Registrar": "0afb09e9-2ddb-4dc7-b161-482499ea5c28",
	"RegistrarType": "bedsregistration",
	"EntryType": "Income",
	"Id": "2366f640-6636-4b7f-933b-02426ca41f3a",
	"DocumentDate": "2114-02-01T00:00:00",
	"Room": "Палата 1",
	"Bed": "Койка 5",
	"Value": 1,
	"TimeStamp": "2014-08-29T13:48:02.7358057+06:00"
},
{
	"Registrar": "a6143ed9-8429-454b-bb89-c97d7ea0fc82",
	"RegistrarType": "bedsregistration",
	"EntryType": "Income",
	"Id": "742beedf-8317-4d7b-88ad-52c4cfc021b8",
	"DocumentDate": "2114-01-01T00:00:00",
	"Room": "Палата 1",
	"Bed": "Койка 2",
	"Value": 1,
	"TimeStamp": "2014-08-29T13:48:02.4257747+06:00"
}]
```

