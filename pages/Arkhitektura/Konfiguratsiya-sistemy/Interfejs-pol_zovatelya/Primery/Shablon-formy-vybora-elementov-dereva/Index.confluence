---
layout: default
title: Шаблон формы выбора элементов дерева
position: 5
categories: 
tags: 
---

<h4>Назначение формы</h4><p>Выбор одного или нескольких элементов дерева.</p><ac:structured-macro ac:name="warning"><ac:parameter ac:name="title">Важно</ac:parameter><ac:rich-text-body><p>Для удобства изложения ниже приводится описание форм выбора для <strong>справочников</strong>, однако все нижесказанное справедливо для любых <strong>документов</strong>.</p></ac:rich-text-body></ac:structured-macro><p>&nbsp;</p><h4>Общий вид формы</h4><p><ac:image><ri:attachment ri:filename="SelectFormWithTree.png" /></ac:image></p><p>&nbsp;</p><h4>Описание формы</h4><ul><li>В заголовке диалога выводится наименование формы выбора.</li><li>Над деревом элементов расположена панель для полнотекстового поиска.</li><li>Центральную часть формы занимает дерево, в котором отображаются элементы.</li><li>Под деревом находятся кнопки (слева на право): &quot;Обновить&quot;, &quot;Ok&quot;, &quot;Отмена&quot;.</li></ul><p>&nbsp;</p><h4>Поведение формы</h4><ul><li><span>Все обращения к серверу должны быть асинхронными и сопровождаться какой-либо анимацией.</span></li><li><span style="line-height: 1.4285715;">При полнотекстовом поиске дерево элементов фильтруется соответствующим образом.</span></li><li>Если дерево отфильтровано и содержит элементы, то под деревом появляется панель с надписью: &quot;Отображены результаты поиска&quot;.</li><li>Если дерево отфильтровано&nbsp;и не содержит ни одного элемента, то под деревом появляется панель с надписью: &quot;По запросу 'Текст строки поиска' ничего не найдено&quot;.</li><li>Нажатие на кнопку &quot;Обновить&quot; приводит к повторной загрузке данных из источника (с учетом строки поиска).</li><li>Если пользователь выбрал элемент и нажал кнопку &quot;Ok&quot;, то форма закрывается, а вызывающему коду возвращается выбранный элемент (или&nbsp;<span style="line-height: 1.4285715;">список выбранных элементов).</span></li><li><span style="line-height: 1.4285715;">Если пользователь не выбрал элемент и нажал кнопку &quot;Ok&quot;, то пользователю выдается предупреждение о необходимости выбора, а форма остается открытой.</span></li><li>Нажатие на кнопку &quot;Отмена&quot; закрывает форму.</li></ul><p>&nbsp;</p><h4>Основные виды форм</h4><p>Форма выбора должна быть простой и удобной: пользователь должен легко и быстро находить нужный элемент для выбора, пользователь должен видеть то, что он выбрал. При реализации формы выбора следует учитывать несколько проблем, которые нужно решить. Во-первых, размер дерева элементов может быть очень большим и нужно обеспечить удобный способ фильтрации данных. Во-вторых, наряду с этим, пользователю может понадобится выбрать сразу несколько элементов, но при этом у него должна быть возможность видеть то, что он уже выбрал. В-третьих, в некоторых сценариях пользователь начинает выбор элементов с его поиска, поэтому сразу загружать список элементов, который, скорей всего, никогда не понадобятся, не нужно (например, диалог выбора из справочника МКБ-10). Исходя из вышесказанного выделено три режима формы выбора элементов дерева, которые могут комбинироваться друг с другом (то есть всего 8 различных вариантов представления формы выбора элементов дерева). Вот эти режимы:</p><p>&nbsp;</p><ul><li><strong>Filtered</strong> - Режим, при котором в дереве не появляются элементы до тех пор, пока пользователь не введет поисковой запрос (как минимум 2 символа).</li><li><strong>Expandable</strong> - Режим, при котором дочерние элементы загружаются только по требованию (например, когда пользователь впервые нажимает на кнопку &quot;+&quot; напротив соответствующего элемента).</li><li><strong>Checked</strong> - Режим, при котором в дереве можно выбрать сразу несколько элементов.</li></ul><p>&nbsp;</p><h4>Примеры визуальных форм</h4><p><ac:structured-macro ac:name="pagetree"><ac:parameter ac:name="root"><ac:link><ri:shortcut ri:key="self" ri:parameter="" /></ac:link></ac:parameter></ac:structured-macro></p><p>&nbsp;</p><h4>Файлы визуальных шаблонов</h4><p><ac:link><ri:attachment ri:filename="SelectFormWithTree.zip" /></ac:link></p><p>&nbsp;</p><p>&nbsp;</p>