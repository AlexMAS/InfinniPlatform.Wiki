---
layout: default
title: DocumentLink
position: 1
categories: 
tags: 
---

Ссылка на документ.

   

Ссылка на документ является указанием на существующую модель данных. Чаще всего ссылки на другие документы используются при описании сложных моделей, а в качестве документов, на которые ссылаются, выступают общие для всех модели данных. Например, вполне очевидно, что такая модель данных, как "Адресная информация" может быть использована не только при описании документа "Информация о пациенте", поэтому вполне логично создать и описать модель данных "Адресная информация", а из других моделей сделать на нее ссылку. Такой подход с одной стороны избавляет от необходимости **повторного описания** одной и той же модели в разных документах, с другой - позволяет более **легко вносить изменения** в эту модель. Например, если в дальнейшем понадобится расширить "Адресную информацию" дополнительными атрибутами, эти изменения коснутся только этой модели. Другой пример, когда могут быть использованы ссылки - это другие самодостаточные документы или классификаторы. Например, документ "Осмотр терапевта" должен хранить ссылку на пациента, с которым связан этот документ. Что касается классификаторов, то они всегда являются повторно используемыми сущностями, поэтому если какой-то из документов содержит справочный атрибут, то он всегда должен описываться, как ссылка на документ, где в качестве документа будет выступать классификатор.

 

Другой не менее важный аспект, связанный со ссылкой на документы, это понятие **встроенного документа** (см. Inline). Если один документ хранит ссылку на другой документ, а признак Inline=false, то данные первого документа будут содержать только первичный ключ (Id) и строковое представление (DisplayName) документа, на который была сделана ссылка. (Подробное описание ссылки на внешний документ см. в разделе [[ForeignKey]].) Если один документ хранит ссылку на другой документ, а признак Inline=true, то данные первого документа будут полностью содержать данные второго документа. Например, документ "Информация о пациенте" будет ссылаться на "Адресную информацию" с признаком Inline=true, поскольку эта информация не имеет смысла без привязки к какому-либо документу. С другой стороны, документ "Осмотр терапевта" будет ссылаться на "Информацию о пациенте" с признаком Inline=false, поскольку это два слабо связанных и самодостаточных документа.

 

Для ссылок на внешние документы (то есть, когда Inline=false), определена настройка **разрешения внешних ссылок** (см. Resolve). Эта настройка не связан со способом хранения документа, она отвечает за логику выборки документов, в котором определена ссылка. Если документ содержит ссылку на внешний документ (Inline=false), а разрешение ссылок запрещено (Resolve=false), то при выборке документа ссылка будет содержать только первичный ключ (Id) и строковое представление (DisplayName) документа, на который была сделана ссылка. Если же разрешение ссылок разрешено (Resolve=true), то при выборке документа ссылка будет содержать весь документ, на который была сделана ссылка.

   

```
{
	"id": "DocumentLink",
	"description": "Ссылка на документ",
	"type": "object",
	"properties": {
		"ConfigId": {
			"description": "Идентификатор конфигурации",
			"type": "string",
			"required": true
		},
		"DocumentId": {
			"description": "Идентификатор документа",
			"type": "string",
			"required": true
		},
		"Inline": {
			"description": "Встроенный документ",
			"type": "boolean",
			"default": false
		},
		"Resolve": {
			"description": "Разрешать ссылку",
			"type": "boolean",
			"default": false
		}
	}
}
```

 

 

