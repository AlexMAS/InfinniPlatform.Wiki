---
layout: default
title: Администрирование и авторизация
position: 
categories: 
tags: 
---

Для подключения системных конфигураций администрирования и авторизации необходимо выполнить импорт конфигураций, расположенных в папке InfinniPlatform\SystemConfiguration. Выполнить это можно, запустив файл InstallPlatform.cmd в корне проекта. В результате будут созданы 3 системных конфигурации

|Наименование|Предназначение|
|------------|--------------|
|Authorization|Предоставляет документы, реализующие низкоуровневые механизмы установки прав, описанные в [[Механизм авторизации (authorization)|Механизм авторизации (authorization)]]. Не предназначена для непосредственного использования, на базе данной конфигурации создаются более высокоуровневые конфигурации для управления правами, такие как Administration|
|Administration|Предоставляет высокоуровневые механизмы установки прав, а также развитый UI, позволяющий настраивать права доступа, пользователей и роли.|
|AdministrationCustomization|Предоставляет шаблоны модулей, реализующих точки расширения бизнес-логики добавления и удаления пользователей системы|

При установке прав на какой либо объект, на который ранее ***не были*** установлены никакие другие права, происходит установка запрета всем остальным пользователям действий с данным объектом. Если бы установка запрета не делалась, то установка прав не имела бы никакого смысла, т.к. это не имело бы никакого эффекта (напомним, что по умолчанию на все несистемные объекты конфигурации пользователи обладают всеми правами, пока не установлен запрет). Таким образом, если необходимо установить права на объект, следует иметь в виду, что настройка прав на объект должна делаться в полном объеме для всех пользователей системы, которые будут работать с данной системой.

 

## Конфигурация "Администрирование"

Предоставляет следующие механизмы управления правами пользователей:

* Добавление новых пользователей
* Добавление новых ролей пользователей
* Добавление разделов документов
* Добавление организаций
* Установка прав на меню конфигураций
* Установка прав на разделы документов по конкретным ролям и организациям

Основной особенностью, благодаря которой работает также механизм, поддерживающий Multi-tenancy, необходимый для режима SaaS, является необходимость сопоставления ***каждому*** пользователю системы определенной организации или нескольких организаций, в рамках которых создается собственная "песочница" со своими документами для каждой организации. При работе с конфигурацией сотрудник либо выбирает нужную организацию и роль в организации, либо эти атрибуты ему указываются без его участия (как, например, в родительском комитете).

Обязанность установки необходимой организации **возлагается на разработчика прикладной конфигурации**, равно как и обязанность предоставления возможности указания текущей выбранной организации.

Таким образом, каждый разработчик прикладной конфигурации, использующей систему авторизации InfinniPlatform, должен выполнить следующие действия:

Определить, каким образом будет создавать новый пользователь. Это можно сделать двумя способами. Пользователь может создаваться через UI конфигурации вручную администратором системы (По умолчанию пользователь Admin, пароль Admin), либо автоматически в фоне (режим самостоятельной регистрации пользователя в системе. Пример данного режима можно увидеть на странице HomePage конфигурации "Administration"). Алгоритм работы с пользовательским интерфейсом конфигурации администрирования описан здесь.В случае если пользователь создается в автоматическом режиме, необходимо также описать процедуру сопоставления организации пользователя в точке расширения ActionUnitOnAddUserEvent (конфигурация AdministrationCustomization). **Если пользователю при создании не будет указана организация, то по умолчанию он будет входить в систему в организацию "Anonimous" **(почувствуй себя хакером), все документы созданные данным пользователем будут доступны другим пользователям с неуказанной организацией. Необходимо реализовать механизм выбора организации либо автоматического сопоставления организации при завершении входа в систему **(Кнопка "Войти")** 

