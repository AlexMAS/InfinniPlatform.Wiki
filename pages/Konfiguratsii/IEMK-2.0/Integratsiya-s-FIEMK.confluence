---
layout: default
title: Интеграция с ФИЭМК
position: 6
categories: 
tags: 
---

<div class="WordSection1"><p>В системе предусмотрена возможность ручной публикации СЭМД первого уровня формализации (публикация заголовка документа в структурированном виде и тела в неструктурированном) в ФИЭМК из специализированного журнала (&laquo;Публикация документов в ФИЭМК&raquo;).</p><p>Публикация предусмотрена для следующих типов документов:</p><ul><li>Эпикриз стационара</li><li>Амбулаторный эпикриз</li><li>Направление. В качестве направления могут выступать направления на госпитализацию, направления на консультацию, направления на лабораторную и инструментальную диагностику (направления на обследование).</li></ul><p>При импорте из сторонней МИС для каждого документа в ИЭМК&nbsp;&nbsp;формируется соответствующий заголовок, причем для&nbsp;перечисленных типов документов (поле DocumentType в заголовке имеет значение &quot;1-&nbsp;<span style="color: rgb(0,0,0);">Эпикриз стационара</span>&quot;, &quot;2-<span style="color: rgb(0,0,0);">Амбулаторный эпикриз</span>&quot; &quot;3-<span style="color: rgb(0,0,0);">Направление</span>&quot;) заголовок помимо основного журнала документов &laquo;попадает&raquo; в журнал &laquo;Публикация документов в ФИЭМК&raquo; с возможностью дальнейшей публикации в ФИЭМК.&nbsp;</p></div><ac:structured-macro ac:name="expand"><ac:parameter ac:name="title">Журнал &quot;Публикация документов в ФИЭМК&quot;</ac:parameter><ac:rich-text-body><div class="WordSection1"><p>Журнал &laquo;Публикация документов в ФИЭМК&raquo; содержит перечень всех документов, которые могут быть опубликованы в ФИЭМК. Такими документами являются:</p><ul><li>Эпикриз стационара</li><li>Амбулаторный эпикриз</li><li>Направление. В качестве направления могут выступать направления на госпитализацию, направления на консультацию, направления на лабораторную и инструментальную диагностику (направления на обследование).</li></ul><p>&nbsp;Источниками журнала являются документы &laquo;Заголовок&raquo; для которых поле&nbsp;DocumentType имеет значение &quot;1-&nbsp;<span style="color: rgb(0,0,0);">Эпикриз стационара</span>&quot;, &quot;2-<span style="color: rgb(0,0,0);">Амбулаторный э</span>пикриз&quot; &quot;3-Направление&quot;, а также документ &quot;Публикация в ФИЭМК&quot;</p><ac:structured-macro ac:name="expand"><ac:parameter ac:name="title">Публикация в ФИЭМК</ac:parameter><ac:rich-text-body><p><span>Документ &quot;Публикация в ФИЭМК&quot; предназначен для хранения данных публикации документов в ФИЭМК.</span></p><table><tbody><tr><td><p><strong>Наименование</strong></p></td><td><p><strong>Тип данных</strong></p></td><td><p><strong>Заголовок</strong></p></td><td><p><strong>Описание</strong></p></td><td><p><strong>Дополнительные условия</strong></p></td><td><p><strong>Комментарий</strong></p></td></tr><tr><td colspan="1">PublicationDate</td><td colspan="1">DateTime</td><td colspan="1">Дата публикации</td><td colspan="1">Дата публикации документа в ФИЭМК</td><td colspan="1">---</td><td colspan="1">---</td></tr><tr><td colspan="1"><span>Publication</span>Error</td><td colspan="1">String</td><td colspan="1">Ошибка публикации</td><td colspan="1"><span>Ошибка публикации <span>документа в ФИЭМК</span></span></td><td colspan="1"><span>---</span></td><td colspan="1"><span>---</span></td></tr><tr><td colspan="1">PublicResult<span>&nbsp;</span><span>&nbsp;</span></td><td colspan="1">Object</td><td colspan="1">Статус</td><td colspan="1"><span>Статус документа</span></td><td colspan="1">Справочник Federal<span><ac:link><ri:page ri:content-title="Справочники ИЭМК 2.0" /><ac:plain-text-link-body><![CDATA[PublicResult]]></ac:plain-text-link-body></ac:link></span></td><td colspan="1"><p>DisplayName: Name</p><p>1-Публикация в ФИЭМК невозможна - не заполнены обязательные поля в документах &laquo;Заголовок&raquo;, &quot;Пациент&quot;, &quot;Сотрудник&quot;, &quot;Мед. организация&quot;, необходимые для публикации в ФИЭМК или тип документа, не соответствует типам документов, которые могут быть опубликованы в ФИЭМК.</p><p>2-Не опубликован - отображает неопубликованные документы (PublicationDate и PublicationError не заполнены)</p><p>3-В процессе публикации - отправлен запрос на публикацию документа, но callback не получен</p><p>4-Опубликован -&nbsp; отображает документы, которые опубликованы успешно (поле PublicationDate заполнено, PublicationError -не заполнено)</p><p>5-Ошибка публикации - отображает документы, опубликованные с ошибкой (заполнены поля PublicationDate и PublicationError)</p></td></tr><tr><td colspan="1">HeaderId</td><td colspan="1">Uuid</td><td colspan="1">Идентификатор заголовка</td><td colspan="1">Идентификатор заголовка</td><td colspan="1">---</td><td colspan="1">---</td></tr></tbody></table><p>Валидация на обязательность полей:</p><table><tbody><tr><th><div class="tablesorter-header-inner">Поля</div></th><th><div class="tablesorter-header-inner">Обязательность</div></th></tr><tr><td><p><span>PublicResult</span><span>&nbsp;</span><span>&nbsp;</span></p></td><td>Обязательно</td></tr></tbody></table></ac:rich-text-body></ac:structured-macro><p>&nbsp;Журнал визуально состоит из 2 панелей:</p><ul><li>1 па<span style="color: rgb(0,0,0);">нель предназначена для отображения табличной части журнала, его фильтров и кнопок. По умолчанию табличная часть журнала должна быть отсортирована по колонке &laquo;Дата создания&raquo;, документы с наиболее актуальной датой создания отображаются в начале списка. Кроме того по умолчанию <span style="color: rgb(0,0,0);">табличная часть журнала должна быть отфильтрована по ЛПУ авторизованного сотрудника.</span></span></li><li><span style="color: rgb(0,0,0);">2 панель предназначена для отображения печатной формы выбранного документа с просмотром неструктурированного контента в формате pdf.</span></li></ul><p><strong style="line-height: 1.4285715;">Внешний вид журнала:</strong></p></div><div class="WordSection2"><p><strong>&nbsp;<ac:image><ri:attachment ri:filename="image2014-12-11-135143.png" /></ac:image></strong></p></div><p><strong>Колонки журнала</strong></p><table><tbody><tr><td><p align="center"><strong>Наименование колонки</strong></p></td><td><p align="center"><strong>Источник колонки</strong></p></td></tr><tr><td><p>---</p></td><td><p>Тип поля &laquo;Флаг&raquo;, колонка предназначена для выбора одного или нескольких документов. Предназначен для множественной публикации документов в ФИЭМК</p></td></tr><tr><td><p>Дата создания</p></td><td><p>Date из документа &laquo;Заголовок&raquo;</p></td></tr><tr><td><p><span style="color: rgb(0,51,102);">Тип документа</span></p></td><td><p><span style="color: rgb(0,51,102);">DocumentType документа &laquo;Заголовок&raquo;</span></p></td></tr><tr><td><p>Пациент</p></td><td><p>Patient <span>документа &laquo;Заголовок&raquo;. <span>DisplayName - <span>LastName+</span> <span>FirstName+<span>MiddleName </span></span>из документа </span><span>&quot;Пациент&quot;</span></span></p></td></tr><tr><td colspan="1">Сотрудник</td><td colspan="1"><span style="color: rgb(0,0,0);">MedicalWorker <span>документа &laquo;Заголовок&raquo;. <span>DisplayName - LastName+ FirstName+MiddleName из документа </span><span>&quot;Сотрудник&quot;</span></span></span></td></tr><tr><td><p>Дата публикации в ФИЭМК</p></td><td><p><span>PublicationDate документа <span>&laquo;Публикация документов в ФИЭМК&raquo;</span></span></p></td></tr><tr><td colspan="1">Статус</td><td colspan="1"><span>PublicResult <span>документа </span><span>&laquo;Публикация документов в ФИЭМК&raquo;</span></span></td></tr></tbody></table><p>&nbsp;</p><p><strong>Фильтры журнала</strong></p><table><tbody><tr><td><p align="center"><strong>Название</strong></p></td><td><p align="center"><strong>Тип данных</strong></p></td><td><p><strong>Дополнительные условия</strong></p></td><td><p><strong>Комментарий</strong></p></td></tr><tr><td><p>Дата создания с</p></td><td><p>DateTime</p></td><td><p>---</p></td><td><p>---</p></td></tr><tr><td><p>Дата создания по</p></td><td><p>DateTime</p></td><td><p>---</p></td><td><p>---</p></td></tr><tr><td><p>Тип документа</p></td><td><p>Object</p></td><td><p>Справочник <span>1.2.643.5.1.13.2.1.1.646</span></p></td><td><p><span>DisplayName: &quot;Наименование электронного медицинского документа&quot;</span></p><p>Выводить только&nbsp; 3 значения из справочника:</p><ul><li>Эпикриз стационара</li><li>Амбулаторный эпикриз</li><li>Направление</li></ul></td></tr><tr><td><p>Пациент</p></td><td><p><span>Object </span></p></td><td><p><span>Справочник &laquo;<ac:link><ri:page ri:content-title="Журнал &quot;Пациенты&quot;" /><ac:plain-text-link-body><![CDATA[Журнал пациентов]]></ac:plain-text-link-body></ac:link>&raquo; (Региональный реестр пациентов)</span></p></td><td><p>---</p></td></tr><tr><td colspan="1">Сотрудник</td><td colspan="1"><span>Object </span></td><td colspan="1"><span>Документы &quot;<ac:link><ri:page ri:content-title="Сотрудник (Practitioner)" /><ac:plain-text-link-body><![CDATA[Сотрудник]]></ac:plain-text-link-body></ac:link>&quot;</span></td><td colspan="1"><span>DisplayName:</span> <span style="color: rgb(0,0,0);">LastName+ FirstName+MiddleName из документа </span><span style="color: rgb(0,0,0);">&quot;Сотрудник&quot;</span></td></tr><tr><td><p>Дата публикации в ФИЭМК с</p></td><td><p>DateTime</p></td><td><p>---</p></td><td><p>---</p></td></tr><tr><td><p>Дата публикации в ФИЭМК по</p></td><td><p>DateTime</p></td><td><p>---</p></td><td><p>---</p></td></tr><tr><td><p>Результат публикации</p></td><td><p><span style="color: rgb(0,0,0);">Object </span></p></td><td><p><span style="color: rgb(0,0,0);">&nbsp;</span><span>Справочник <span>Federal</span><ac:link><ri:page ri:content-title="Справочники ИЭМК 2.0" /><ac:plain-text-link-body><![CDATA[PublicResult]]></ac:plain-text-link-body></ac:link></span></p></td><td><p><span>1-Публикация в ФИЭМК невозможна - <span>не заполнены обязательные поля в документах &laquo;Заголовок&raquo;, &quot;Пациент&quot;, &quot;Сотрудник&quot;, &quot;Мед. организация&quot;, необходимые для публикации в ФИЭМК или тип документа, не соответствует типам документов, которые могут быть опубликованы в ФИЭМК.</span></span></p><p>2-Не опубликован - отображает неопубликованные документы (<span>PublicationDate</span> и <span>Publication</span><span>Error</span> не заполнены)</p><p><span>3-В процессе публикации - отправлен запрос на публикацию документа, но callback не получен</span></p><p><span>4-Опубликован -&nbsp; отображает документы, которые опубликованы успешно (поле </span><span>PublicationDate</span><span> заполнено, </span><span>Publication</span><span>Error -</span><span>не заполнено)</span></p><p><span>5-</span><span>Ошибка публикации</span><span> - отображает документы, опубликованные с ошибкой (заполнены поля </span><span>PublicationDate</span><span> и </span><span>Publication</span><span>Error)</span></p></td></tr></tbody></table><p><strong>&nbsp;</strong>По умолчанию журнал должен быть отфильтрован по текущему ЛПУ</p><p><strong>Кнопки журнала</strong></p><table><thead><tr><td><p align="center"><strong>Расположение</strong></p></td><td><p align="center"><strong>Кнопка</strong></p></td><td><p align="center"><strong>Видимость</strong></p></td><td><p align="center"><strong>Действие</strong></p></td></tr></thead><tbody><tr><td><p>Action Bar. Также кнопки доступны из контекстного меню.</p></td><td><p><span style="color: rgb(0,0,0);">Опубликовать</span></p></td><td><p><span style="color: rgb(0,0,0);">Всегда, за исключением случая, если документ уже опубликован (поле &quot;Дата публикации&quot; заполнено, поле &quot;Ошибка не заполнено&quot;, строка выделена зеленым цветом)</span></p></td><td><ol><li>Формирование запроса на отправку в ФИЭМК документа и данных пациента в соответствии с правилами формирования</li><li>Отправка документа и данных пациента в ФИЭМК</li></ol><p>&nbsp;</p><p>В случае успешной публикации документа в журнале указывается дата публикации.</p><p>В случае ошибки публикации документа или ошибки при формировании документа в журнале указывается дата публикации, в печатной форме -текст ошибки</p></td></tr></tbody></table><p>&nbsp;</p><p><strong>Цветовое кодирование:</strong></p><p>Красный - при статусе <span>1-Публикация в ФИЭМК невозможна </span></p><p>Зеленый &ndash; при статусе <span>4-Опубликован</span></p><p>Желтый - при статусе <span>3-В процессе публикации</span></p><p><span>Розовый - <span>при статусе </span><span>5-</span><span>Ошибка публикации</span></span></p></ac:rich-text-body></ac:structured-macro><p class="Default">Публикация документов из ИЭМК в ФИЭМК осуществляется в рамках обмена сообщениями и СЭМД, удовлетворяющими следующим требованиям:</p><ol><li>Структура сообщений, обеспечивающих передачу клинического документа, соответствует требованиям &nbsp; интеграционного профиля IHE XDS.b и HL7 v.2.5;</li><li>Сообщение содержит определённый синтаксис и комплекс структур&nbsp;для обеспечения передачи СЭМД в формате документа HL7 CDA R2;</li><li>Спецификация клинического документа задается с помощью&nbsp; шаблона СЭМД;</li><li>Клинический документ является полным информационным объектом, с полностью определёнными компонентами. Он может содержать текст, изображения, звук и другое мультимедийное содержание, а так же ссылки на мультимедийные данные, расположенные на других доступных ресурсах;</li><li>Сообщения строго типизированы по назначению. Типы сообщений:</li></ol><ul><li>Запрос/передача СЭМД;</li><li>Запрос/передача персональных данных пациента;</li></ul><p>Передача электронных сообщений между ИЭМК и ФИЭМК осуществляется посредством web-сервисов. При этом:</p><ul><li>Web-сервисы выполняют роль точки доступа в ФИЭМК;</li><li>Web-сервисы ФИЭМК публикуются через подсистему Интеграция Прикладных Систем (ИПС) системы ЕГИСЗ;</li><li>Доступ к web-сервисам осуществляется по защищенному каналу;</li><li>На уровне ИПС осуществляется авторизация и аутентификация МИС&nbsp; и&nbsp; авторизация пользователя ЕГИСЗ посредством ЕСИАиА;</li><li>Результат обработки сообщения передается web-сервисом обратно в&nbsp; ИЭМК через ИПС.</li></ul><p>Структура сообщений, СЭМД и веб-сервисы описаны в документах &quot;Сценарии взаимодействия ИЭМК с внешними системами v1.1&quot;, &quot;Требования к МИС по обеспечению взаимодействия с системой ведения ИЭМК&quot;, &quot;Комплект спецификаций без IHE v 1 2&quot;, &quot;Комплект спецификаций c IHE v 2 6&quot;, &quot;Описание СЭМД Часть 1. Заголовок документа. v1.2&quot;, опубликованных на официальном сайте&nbsp;<a href="http://egisz-docs.rosminzdrav.ru/">http://egisz-docs.rosminzdrav.ru/</a>&nbsp;</p><ac:structured-macro ac:name="expand"><ac:parameter ac:name="title">Правила формирования СЭМД</ac:parameter><ac:rich-text-body><p>Для отправки СЭМД в ФИЭМК необходи<span style="color: rgb(0,0,0);">мо:</span></p><ol><li><span style="color: rgb(0,0,0);">Со стороны конфигурации ИЭМК выгрузить данные о пациенте, сотруднике, мед. организации, документе&nbsp; из документов &laquo;Пациент&raquo;, &laquo;Сотрудник&raquo;, &laquo;Мед. организация&raquo;, &laquo;Заголовок&raquo; в формате JSON. (структура JSON модели - <a href="http://knowledge:8081/pages/viewpage.action?pageId=39485448"><span style="color: rgb(0,0,0);">http://knowledge:8081/pages/viewpage.action?pageId=39485448</span></a>). При этом необходимо присваивать значения некоторых полей по умолчанию ввиду их отсутствия в документах &laquo;Пациент&raquo;, &laquo;Сотрудник&raquo;, &laquo;Мед. организация&raquo;, &laquo;Заголовок&raquo;</span></li><li><span style="color: rgb(0,0,0);">Со стороны конфигурации сопоставить справочники, используемые в документах со справочниками&nbsp; ФИЭМК, произвести соответствующие изменения.</span></li><li><span style="color: rgb(0,0,0);">Со стороны конфигурации ФИЭМК сформировать CDA документ и подписать его ЭЦП.</span></li><li><span style="color: rgb(0,0,0);">Со стороны конфигурации ФИЭМК сформировать запрос на передачу СЭМД и персональных данных пациента.&nbsp;</span></li><li><span style="color: rgb(0,0,0);">Со стороны конфигурации ФИЭМК передать запрос посредством веб-сервисов ФИЭМК</span></li></ol><p><strong>Выгрузка данных</strong></p><p><strong>Данные о медицинском работнике</strong></p><p>Данные о медицинском работнике формируются из документа &laquo;Сотрудник&raquo;, при этом сотрудник должен соответствовать значению поля &laquo;Сотрудник&raquo; (MedicalWorker) соответствующего&nbsp; документа &laquo;Заголовок&raquo;.</p><ac:structured-macro ac:name="expand"><ac:parameter ac:name="title">Данные из документа &quot;Сотрудник&quot; (в описании помечены как &quot;Фед.&quot;)</ac:parameter><ac:rich-text-body><table><tbody><tr><td><p align="center"><strong>Наименование поля в заголовке</strong></p></td><td><p align="center"><strong>Наименование поля в модели данных JSON (</strong><a href="http://knowledge:8081/pages/viewpage.action?pageId=39485454"><strong>Модель данных медицинского работника</strong></a><strong>)</strong></p></td></tr><tr><td><p>Id</p></td><td><p>Id, UniqueNumber</p><p>&nbsp;</p><p><strong>MedicalWorkerId</strong><strong>, </strong><strong>AuthenticatorPersonId</strong><strong> </strong><strong>для модели документа &laquo;Эпикриз выписной&raquo;, </strong></p><p><strong>&nbsp;</strong></p><p><strong>MedicalWorkerId</strong><strong> &nbsp;</strong><strong>для модели документа &laquo;Направление&raquo;, &laquo;Амбулаторный эпикриз&raquo;</strong></p></td></tr><tr><td><p>LastName</p></td><td><p>LastName</p><p>&nbsp;</p><p><strong>AuthenticatorLastName для модели документа &laquo;Эпикриз выписной&raquo;</strong></p></td></tr><tr><td><p>FirstName</p></td><td><p>FirstName</p><p>&nbsp;</p><p><strong>AuthenticatorFirstName для модели документа &laquo;Эпикриз выписной&raquo;</strong></p></td></tr><tr><td><p>MiddleName</p></td><td><p>MiddleName</p><p>&nbsp;</p><p><strong>AuthenticatorMiddleName для модели документа &laquo;Эпикриз выписной&raquo;</strong></p></td></tr><tr><td><p>IdentityCards</p></td><td><p>IdentityCards</p></td></tr><tr><td><p>Snils</p></td><td><p>Requisites</p></td></tr><tr><td><p>Inn</p></td><td><p>Requisites</p></td></tr><tr><td><p>Addresses</p></td><td><p>Addresses</p></td></tr><tr><td><p>ContactInformation</p></td><td><ul><li>Phones &ndash; если Value = телефон,</li><li>Emails - если Value =e-mail</li></ul></td></tr></tbody></table></ac:rich-text-body></ac:structured-macro><p><strong style="line-height: 1.4285715;">Данные &nbsp;о пациенте</strong></p><p>Данные о пациенте формируются из документа &laquo;Пациент&raquo;, при этом пациент должен соответствовать значению поля &laquo;Пациент&raquo; (Patient) соответствующего документа &laquo;Заголовок&raquo;.</p><ac:structured-macro ac:name="expand"><ac:parameter ac:name="title">Данные из документа &laquo;Пациент&raquo; (в описании помечены как &laquo;Фед.&raquo;):</ac:parameter><ac:rich-text-body><table><tbody><tr><td><p><strong>Наименование поля в заголовке</strong></p></td><td><p><strong>Наименование поля в модели данных JSON (</strong><a href="http://knowledge:8081/pages/viewpage.action?pageId=39485454"><strong>Модель данных пациента</strong></a><strong>)</strong></p></td></tr><tr><td><p>Id</p></td><td><p>Id, UniqueNumber,</p><p>&nbsp;</p><p><strong>PatientId для модели документа &laquo;Эпикриз выписной&raquo;, &laquo;Направление&raquo;, &laquo;Амбулаторный эпикриз&raquo;</strong></p></td></tr><tr><td><p>LastName</p></td><td><p>LastName</p></td></tr><tr><td><p>FirstName</p></td><td><p>FirstName</p></td></tr><tr><td><p>MiddleName</p></td><td><p>MiddleName</p></td></tr><tr><td><p>Sex</p></td><td><p>Sex</p></td></tr><tr><td><p>Snils</p></td><td><p>Requisites</p></td></tr><tr><td><p>Inn</p></td><td><p>Requisites</p></td></tr><tr><td><p>Citizenship</p></td><td><p>Citizenship</p></td></tr><tr><td><p>BirthTime</p></td><td><p>BirthTime</p></td></tr><tr><td><p>Birthplace</p></td><td><p>Birthplace</p></td></tr><tr><td><p>IsDeceased</p></td><td><p>IsDeceased</p></td></tr><tr><td><p>DeceasedTime</p></td><td><p>DeceasedTime</p></td></tr><tr><td><p>ResidenceType</p></td><td><p>ResidenceType</p></td></tr><tr><td><p>SocialStatus</p></td><td><p>SocialStatus</p></td></tr><tr><td><p>MaritalStatus</p></td><td><p>MaritalStatus</p></td></tr><tr><td><p>Language</p></td><td><p>Language</p></td></tr><tr><td><p>ContactInformation</p></td><td><ul><li>Phones &ndash; если Value = телефон,</li><li>Emails - если Value =e-mail</li></ul></td></tr><tr><td><p>Addresses</p></td><td><p>Addresses</p></td></tr><tr><td><p>IdentityCards</p></td><td><p>IdentityCards</p></td></tr><tr><td><p>Policies</p></td><td><p>Policies</p></td></tr><tr><td><p>Job</p></td><td><p>&nbsp;</p></td></tr><tr><td><p>&hellip;/JobCode</p></td><td><p>JobCode</p></td></tr><tr><td><p>&hellip;/JobTitleName</p></td><td><p>JobTitleName</p><p>&nbsp;</p></td></tr><tr><td><p>&hellip;/OrganizationName</p></td><td><p>OrganizationName</p><p>&nbsp;</p></td></tr><tr><td><p>Relationships</p></td><td><p>Relationships</p></td></tr><tr><td><p>Privilege</p></td><td><p><strong>Privilege</strong></p></td></tr><tr><td><p>.../IssueDate</p></td><td><p>.../IssueDate</p></td></tr><tr><td><p>.../ExpiryDate</p></td><td><p>.../ExpiryDate</p></td></tr><tr><td><p>.../Group</p></td><td><p>.../Group</p></td></tr></tbody></table></ac:rich-text-body></ac:structured-macro><p><strong style="line-height: 1.4285715;">Данные о медицинской организации</strong></p><p>Данные о медицинской организации формируются из документа &laquo;Медицинская организация&raquo;, при этом медицинская организация должна соответствовать значению поля &laquo;Медицинская организация&raquo; (MedicalOrganization) соответствующего документа &laquo;Заголовок&raquo;.</p><ac:structured-macro ac:name="expand"><ac:parameter ac:name="title">Данные из документа &laquo;Медицинская организация&raquo; (в описании  помечены как &laquo;Фед.&raquo;):</ac:parameter><ac:rich-text-body><table><tbody><tr><td><p align="center"><strong>Наименование поля в заголовке</strong></p></td><td><p align="center"><strong>Наименование поля в модели данных JSON (Модель данных медицинской организации)</strong></p></td></tr><tr><td><p>PublicId</p></td><td><p>Id, PublicId, RegisterCode, Code</p><p>&nbsp;</p><p><strong>OrganizationId для модели данных пациента и мед. работника</strong></p><p><strong>DocumentOwner, AuthenticatorId для модели данных документа &laquo;Эпикриз выписной&raquo;</strong></p><p><strong>DocumentOwner для модели данных документа &laquo;Направление&raquo;, &laquo;Амбулаторный эпикриз&raquo;</strong></p></td></tr><tr><td><p>FullName</p></td><td><p>FullName&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p><p><strong>DocumentOwnerName для модели данных документа &laquo;Эпикриз выписной&raquo;, &laquo;Направление&raquo;, &laquo;Амбулаторный эпикриз&raquo;</strong></p></td></tr><tr><td><p>ShortName</p></td><td><p>ShortName</p></td></tr><tr><td><p>Addresses</p></td><td><p>Addresses</p></td></tr><tr><td><p>ContactInformation</p></td><td><ul><li>Phones &ndash; если Value = телефон,</li><li>Emails - если Value =e-mail</li></ul></td></tr><tr><td><p>Website</p></td><td><p>Website</p></td></tr><tr><td><p>Requisites</p></td><td><p>Requisites</p></td></tr></tbody></table></ac:rich-text-body></ac:structured-macro><p><strong style="line-height: 1.4285715;">Данные о документе</strong></p><p>Данные о документе берутся из документа &laquo;Заголовок&raquo;. В зависимости от типа документа (Амбулаторный эпикриз, Направление, Эпикриз стационара выписной) набор полей для формирования СЭМД будет отличаться.</p><ac:structured-macro ac:name="expand"><ac:parameter ac:name="title">Эпикриз стационара выписной (DocumentType = 1- Эпикриз стационара)</ac:parameter><ac:rich-text-body><table><tbody><tr><td><p align="center"><strong>Наименование поля в заголовке</strong></p></td><td><p align="center"><strong>Наименование поля в модели данных JSON (Эпикриз выписной)</strong></p></td></tr><tr><td><p>OriginalId</p></td><td><p>DocumentId</p></td></tr><tr><td><p>Date</p></td><td><p>Date</p></td></tr><tr><td><p>MedicalOrganization</p></td><td><p>Для определения соответствующего документа &laquo;Мед. организация&raquo;</p></td></tr><tr><td><p>Patient</p></td><td><p>Для определения соответствующего документа &laquo;Пациент&raquo;</p></td></tr><tr><td><p>MedicalWorker</p></td><td><p>Для определения соответствующего документа &laquo;Сотрудник&raquo;</p></td></tr><tr><td><p>Speciality</p></td><td><p><strong>Specialities для модели данных &laquo;Мед. работник&raquo;</strong></p></td></tr><tr><td><p>Post</p></td><td><p>AuthenticatorCode</p><p>&nbsp;</p><p><strong>Posts для модели данных &laquo;Мед. работник&raquo;</strong></p></td></tr><tr><td><p>DocumentVersionNumber</p></td><td><p>DocumentVersionNumber</p></td></tr><tr><td><p>CaseNumber</p></td><td><p>CaseNumber</p></td></tr><tr><td><p><span>EventStartDate</span></p></td><td><p>HospitalizationIssueDate</p></td></tr><tr><td><p>EventEndDate</p></td><td><p>HospitalizationExpiryDate</p></td></tr><tr><td><p>DispositionCode</p></td><td><p>HospitalizationDispositionCode</p></td></tr><tr><td><p>WhoDelivered</p></td><td><p>.../WhoDelivered</p></td></tr><tr><td><p>LengthOfStay</p></td><td><p>.../NumberOfDays</p></td></tr><tr><td><p>HospitalizationInThisYear</p></td><td><p>.../HospitalizationInThisYear</p></td></tr><tr><td><p>TimeAfterBegining</p></td><td><p>.../TimeAfterBegining</p></td></tr><tr><td><p><span>PrintView</span></p></td><td><p><span>NonXmlBody</span></p></td></tr></tbody></table></ac:rich-text-body></ac:structured-macro><ac:structured-macro ac:name="expand"><ac:parameter ac:name="title">Амбулаторный эпикриз (DocumentType = 2-Амбулаторный эпикриз)</ac:parameter><ac:rich-text-body><table><tbody><tr><td><p align="center"><strong>Наименование поля в заголовке</strong></p></td><td><p align="center"><strong>Наименование поля в модели данных JSON (Амбулаторный эпикриз</strong><strong>)</strong></p></td></tr><tr><td><p>OriginalId</p></td><td><p>DocumentId</p></td></tr><tr><td><p>Date</p></td><td><p>Date</p></td></tr><tr><td><p>MedicalOrganization</p></td><td><p>Для определения соответствующего документа &laquo;Мед. организация&raquo;</p></td></tr><tr><td><p>Patient</p></td><td><p>Для определения соответствующего документа &laquo;Пациент&raquo;</p></td></tr><tr><td><p>MedicalWorker</p></td><td><p>Для определения соответствующего документа &laquo;Сотрудник&raquo;</p></td></tr><tr><td><p>Speciality</p></td><td><p><strong>Specialities для модели данных &laquo;Мед. работник&raquo;</strong></p></td></tr><tr><td><p>Post</p></td><td><p><strong>Posts для модели данных &laquo;Мед. работник&raquo;</strong></p></td></tr><tr><td><p>DocumentVersionNumber</p></td><td><p>DocumentVersionNumber</p></td></tr><tr><td><p>CaseNumber</p></td><td><p>CaseNumber</p></td></tr><tr><td><p>EventStartDate</p></td><td><p>EventStartDate</p></td></tr><tr><td><p>EventEndDate</p></td><td><p>EventEndDate</p></td></tr><tr><td><p>DispositionCode</p></td><td><p>AmbulanceDispositionCode</p></td></tr><tr><td><p><span>PrintView</span></p></td><td><p><span>NonXmlBody</span></p></td></tr></tbody></table></ac:rich-text-body></ac:structured-macro><ac:structured-macro ac:name="expand"><ac:parameter ac:name="title">Направление (DocumentType = 3-Направление)</ac:parameter><ac:rich-text-body><table><tbody><tr><td><p align="center"><strong>Наименование поля в заголовке</strong></p></td><td><p align="center"><strong>Наименование поля в модели данных JSON (Направление)</strong></p></td></tr><tr><td><p>OriginalId</p></td><td><p>DocumentId</p></td></tr><tr><td><p>Date</p></td><td><p>Date</p></td></tr><tr><td><p>MedicalOrganization</p></td><td><p>Для определения соответствующего документа &laquo;Мед. организация&raquo;</p></td></tr><tr><td><p>Patient</p></td><td><p>Для определения соответствующего документа &laquo;Пациент&raquo;</p></td></tr><tr><td><p>MedicalWorker</p></td><td><p>Для определения соответствующего документа &laquo;Сотрудник&raquo;</p></td></tr><tr><td><p>Speciality</p></td><td><p><strong>Specialities для модели данных &laquo;Мед. работник&raquo;</strong></p></td></tr><tr><td><p>Post</p></td><td><p><strong>Posts для модели данных &laquo;Мед. работник&raquo;</strong></p></td></tr><tr><td><p>DocumentVersionNumber</p></td><td><p>DocumentVersionNumber</p></td></tr><tr><td><p><span>EventStartDate</span></p></td><td><p>IssueDate</p></td></tr><tr><td><p>DirectionType</p></td><td><p>DirectionType</p></td></tr><tr><td>PrintView</td><td><p><span>NonXmlBody</span></p></td></tr></tbody></table></ac:rich-text-body></ac:structured-macro><p>&nbsp;</p><p><strong>Значения по умолчанию</strong><strong style="line-height: 1.4285715;">&nbsp;</strong></p><table><tbody><tr><td><p><strong>Параметр</strong></p></td><td><p><strong>Эпикриз стационара выписной</strong></p></td><td><p><strong>Амбулаторный эпикриз</strong></p></td><td><p><strong>Направление</strong></p></td></tr><tr><td><p>AuthenticatorParticipant (Роль в оказании медицинской помощи. Элемент локального справочника 1.2.643.5.1.13.2.7.1.30)</p></td><td><p>Лечащий врач</p></td><td><p>Лечащий врач</p></td><td><p>Лечащий врач</p></td></tr><tr><td><p>Confidentiality (Уровень конфиденциальности документа. Элемент локального справочника 2.16.840.1.113883.5.25)</p></td><td><p>N</p></td><td><p>N</p></td><td><p>N</p></td></tr><tr><td><p>TermsOfCare</p><p>(Условия оказания мед. помощи. Элемент справочника 1.2.643.5.1.13.2.1.1.103)</p></td><td><p>1-Стационарная медицинская помощь</p></td><td><p>2-Амбулаторная помощь</p></td><td><p>---</p></td></tr></tbody></table><p><strong>&nbsp;</strong></p><p><strong>Сопоставление классификаторов при формировании СЭМД для отправки в ФИЭМК</strong></p><p>Для получения корректных данных документа для передачи в ФИЭМК необходимо производить сопоставление справочников используемых в заголовке документа и справочников для формирования СЭМД.&nbsp;</p><ol><li><span style="line-height: 1.4285715;">Для заголовков, у которых DocumentType имеет значение &laquo;3-Направление&raquo; необходимо производить сопоставление&nbsp; справочников &nbsp;LocalDirectionType (справочник заголовка, поле DirectionType) и DirectionType (справочник СЭМД для ФИЭМК </span><strong style="line-height: 1.4285715;">1.2.643.5.1.13.2.7.1.2</strong><span style="line-height: 1.4285715;">). В документе, выгружаемом на ФИЭМК необходимо указывать значение из справочника DirectionType.&nbsp;</span></li></ol><table><tbody><tr><td><p align="center"><strong>LocalDirectionType</strong></p></td><td><p align="center"><strong>DirectionType (1.2.643.5.1.13.2.7.1.2</strong><strong>)</strong></p></td></tr><tr><td><p>1 -&nbsp;Госпитализация</p></td><td><p>1- Госпитализация</p></td></tr><tr><td><p>2 - Лабораторный анализ</p></td><td><p>2- Обследование</p></td></tr><tr><td><p>3 - Консультация</p></td><td><p>3- Консультация</p></td></tr><tr><td><p>4 - Инструментальное исследование</p></td><td><p>2- Обследование</p></td></tr></tbody></table><p>2. &nbsp;<span style="line-height: 1.4285715;">Для заголовков, у которых DocumentType имеет значение &laquo;1-&nbsp;Эпикриз стационара&raquo; необходимо производить сопоставление справочников V012 (справочник заголовка, Outcome для которого DL_USLOV = 1, поле HospitalizationDispositionCode) и 1.2.643.5.1.13.2.1.1.542 (справочник СЭМД для ФИЭМК). В документе, выгружаемом на ФИЭМК необходимо указывать значение из справочника 1.2.643.5.1.13.2.1.1.542</span></p><table><tbody><tr><td><p align="center"><strong>V012</strong></p></td><td><p align="center"><strong>1.2.643.5.1.13.2.1.1.542</strong></p></td></tr><tr><td><p>1 -&nbsp;Выздоровление</p></td><td><p>1-выписан</p></td></tr><tr><td><p>2 - Улучшение</p></td><td><p>1-выписан</p></td></tr><tr><td><p>3 - Без перемен</p></td><td><p>1-выписан</p></td></tr><tr><td><p>4 - Ухудшение</p></td><td><p>1-выписан</p></td></tr></tbody></table><p>3. Для заголовков, у которых DocumentType имеет значение&nbsp; &laquo;2-Амбулаторный эпикриз&raquo; необходимо производить сопоставление&nbsp; справочников V012 (справочник заголовка, Outcome для которого DL_USLOV = 3, поле AmbulanceDispositionCode) и 1.2.643.5.1.13.2.1.1.688 (справочник СЭМД для ФИЭМК). В документе, выгружаемом на ФИЭМК необходимо указывать значение из справочника 1.2.643.5.1.13.2.1.1.688</p><table><tbody><tr><td><p align="center"><strong>V012</strong></p></td><td><p align="center"><strong>1.2.643.5.1.13.2.1.1.688</strong></p></td></tr><tr><td><p>1 -&nbsp;Выздоровление</p></td><td><p>1 - выздоровление</p></td></tr><tr><td><p>2 - Ремиссия</p></td><td><p>3- без перемен</p></td></tr><tr><td><p>3 - Улучшение</p></td><td><p>2- улучшение</p></td></tr><tr><td><p>4 - Без перемен</p></td><td><p>3- без перемен</p></td></tr><tr><td><p>5 - Ухудшение</p></td><td><p>4- ухудшение</p></td></tr><tr><td><p>6 - Осмотр</p></td><td><p>3- без перемен</p></td></tr></tbody></table></ac:rich-text-body></ac:structured-macro><ac:structured-macro ac:name="expand"><ac:parameter ac:name="title">Преобразование данных перед публикацией в ФИЭМК</ac:parameter><ac:rich-text-body><p>Перед публикация заголовка документа в ФИЭМК производятся следующие действия:</p><ol><li>Разрешение ссылок на справочники с приведением значений к стандартному виду с полями Code, CodeSystem, CodeSystemName</li><li>Значения из массива ContactInformation помещаются в поля Phones и Emails</li><li>Полю PublicId организации присваивается значение PublicId.Id</li><li>Из значения СНИЛС удаляются пробелы и дефисы</li><li>Значения полей заголовка Speciality и Post копируются в соответствующие поля медицинского работника</li><li>Значения полей Snils и Inn пациента и медицинского работника копируются в коллекцию Requisites</li><li>Для значения поля DocumentType заголовка документа используется значение из справочника (присваивается CodeSystem = &quot;1.2.643.5.1.13.2.1.1.646&quot;, CodeSystemName = &quot;Система электронных медицинских документов&quot;)</li><li>Полю NonXmlBody заголовка присваивается значение PrintView</li><li>Объединение данных о медицинском работнике, пациенте, организации и заголовке по следующим правилам:<br /> patient.Organization = organization<br /> header.Patient = patient<br /> header.Author = medicalWorker<br /> header.Author.Organization = organization;<br /><br /><br /><br /></li></ol><p>&nbsp;</p></ac:rich-text-body></ac:structured-macro><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p><br /><br /></p>