---
layout: doc
title: "Сохранение документов, несоответствующих схеме"
position: 
categories: 
tags:
---

## Описание
В случае сохранения документов, в которых имеются поля, несоответствующие объявленным метаданным
схемы документа в приложении, возможно три варианта поведения системы.

## Вариант 1
Документ содержит поле, объявление которого отсутствует в приложении.
В этом случае, при сохранении документа такое поле будет отброшено, а документ будет успешно сохранен

## Пример

```csharp
var game = new
{
	Name = "Divinity:Original Sin",
	Price = 1800,
	SomeFieldWhichMissingInSchema = 1111
};

string gameId = api.SetDocument("gameshop", "catalogue", Guid.NewGuid().ToString(), game);
```

## Сохраненный документ

```js
{
	Id = "9949447D-D7F5-4C49-ADAF-56FCC614BF51"
	Name = "Divinity:Original Sin",
	Price = 1800,
}
```
## Вариант 2
Документ содержит поле, объявление которого присутствует в приложении, однако тип значения, указанного
для этого поля, отличается от типа поля, указанного в метаданных схемы документа в приложении.
При этом указанное значение поля документа может быть сконвертировано в тип значения, указанный в
метаданных схемы документа в приложении.
В этом случае, при сохранении документа произойдет конвертирование значения поля в то значение, 
которое имеет тип, совпадающий с типом, указанным в метаданных схемы документа.
Список возможных автоматических конвертирований значения:
* любой тип -> строка
* строка -> целое число
где ->  - направление конвертирования

## Пример

```csharp
var game = new
{
	Name = "Divinity:Original Sin",
	Price = "1800",
};

string gameId = api.SetDocument("gameshop", "catalogue", Guid.NewGuid().ToString(), game);
```

## Сохраненный документ

```js
{
	Id = "9949447D-D7F5-4C49-ADAF-56FCC614BF51"
	Name = "Divinity:Original Sin",
	Price = 1800,
}
```