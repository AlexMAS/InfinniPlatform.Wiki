---
layout: doc
title: "Versioning"
position: 
categories: 
tags:
---

Система версионирования конфигураций

## Description

В ходе разработки новых конфигураций одной из основных необходимых возможностей системы является возможность версионирования конфигураций.
Под версионированием конфигураций понимается следующее:

* Возможность изменения кодовой базы конфигурации с возможностью продолжения работы пользователей с предыдущей версией конфигурации, созданной до внесения изменений.
* Возможность гибкого перехода пользователей между различными версиями конфигураций
* Возможность определения факта актуальности версии прикладной конфигурации
* Возможность одновременного развертывания нескольких версий одной и той же конфигурации
* Возможность перехода на более новые версии конфигурации

Для обеспечения выполнения данных функций применяется схема семантического версионирования прикладных конфигураций, описанная в http://semver.org/lang/ru/
При развертывании каждой прикладной конфигурации указывается версия прикладной конфигурации.

При этом соблюдаются следующие основные принципы формирования развертываемых версий:

1. Папка с исходными метаданными развертываемой прикладной конфигурации должна иметь наименование в формате:

<Наименование конфигурации>_<Семантическая версия конфигурации>

Пример названия папки:

```js

PTA_1.0.0.0 

```

2. Развертываемая версия метаданных прикладного решения должна иметь следующую файловую структуру:

Родительская папка, название в формате <Наименование конфигурации>_<Семантическая версия конфигурации>
	|
	|- Папка проекта в составе прикладного решения 
	|- Папка проекта в составе прикладного решения 
	|- ...
	Файл Solution.json 
	
Где файл Solution.json содержит описание прикладного решения и список прикладных конфигураций, входящих в состав прикладного решения.

Пример прикладного решения можно увидеть в корне платформы в папке Gameshop_1.0.0.0 содержащей описание прикладного решения демо-конфигурации,
используемой для тестов .NET SDK и REST SDK, а также в примерах в описании SDK.

Использование системы версионирования является прозрачным как для клиентов, так и для прикладных разработчиков системы.

Схема функционирования системы версионирования следующая:

1. При старте системы загружаются все установленные на данном экземпляре сервера версии прикладных конфигураций.
2. При первом обращении пользователя к сервисам конкретной прикладной конфигурации, данному пользователю предоставляется самая актуальная на момент обращения версия конфигурации.
3. Сопоставленная пользователю версия конфигурации запоминается и при следующем обращении пользователя, ему предоставляются сервисы именно этой версии конфигурации
4. В случае минорного обновления версии прикладной конфигурации выполняется автоматический перевод пользователя на обновленную версию конфигурации.
5. В случае мажорного обновления версии прикладной конфигурации, клиент может выяснить факт наличия мажорного обновления и выполнить переход на обновленную версию системы по команде пользователя

Для работы с мажорными обновлениями системы предназначены методы Version API SDK, предоставляемые как .NET SDK, так REST SDK.



